!function(){"use strict";var e="undefined"!=typeof window?window:global;if("function"!=typeof e.require){var t={},o={},n=function(e,t){return{}.hasOwnProperty.call(e,t)},i=function(e,t){var o,n,i=[];o=/^\.\.?(\/|$)/.test(t)?[e,t].join("/").split("/"):t.split("/");for(var r=0,c=o.length;c>r;r++)n=o[r],".."===n?i.pop():"."!==n&&""!==n&&i.push(n);return i.join("/")},r=function(e){return e.split("/").slice(0,-1).join("/")},c=function(t){return function(o){var n=r(t),c=i(n,o);return e.require(c,t)}},s=function(e,t){var n={id:e,exports:{}};return o[e]=n,t(n.exports,c(e),n),n.exports},a=function(e,r){var c=i(e,".");if(null==r&&(r="/"),n(o,c))return o[c].exports;if(n(t,c))return s(c,t[c]);var a=i(c,"./index");if(n(o,a))return o[a].exports;if(n(t,a))return s(a,t[a]);throw new Error('Cannot find module "'+e+'" from "'+r+'"')},l=function(e,o){if("object"==typeof e)for(var i in e)n(e,i)&&(t[i]=e[i]);else t[e]=o},u=function(){var e=[];for(var o in t)n(t,o)&&e.push(o);return e};e.require=a,e.require.define=l,e.require.register=l,e.require.list=u,e.require.brunch=!0}}(),require.register("scripts/drawing-tool",function(e,t,o){function n(e){console.log("Drawing Tool created"),this.canvas=new fabric.Canvas(e),fabric.Object.prototype.transparentCorners=!1,fabric.Line.prototype.strokeWidth=10,fabric.Line.prototype.stroke="green",this.getCanvas=function(){return this.canvas};var t=new fabric.Rect({width:200,height:100,left:500,top:150,angle:45,fill:"rgba(0,0,200,0.5)"});this.canvas.add(t);var o=new fabric.Line([0,0,100,100],{});this.canvas.add(o);var n=this,r=new i("Selection Tool","select");r.activate=function(){console.log("items are now selectable"),this.setSelectable(!0)},r.deactivate=function(){console.log("items are no longer selectable"),this.setSelectable(!1)},r.setSelectable=function(e){n.canvas.selection=e;for(var t=n.canvas.getObjects(),o=t.length-1;o>=0;o--)t[o].selectable=e};var c=new i("Line Tool","line");c.activate=function(){{var e,t=!1;n.canvas.getObjects().length}n.canvas.on("mouse:down",function(t){var o=t.e.offsetX,i=t.e.offsetY;e=new fabric.Line([o,i,o,i],{}),e.selectable=!1,n.canvas.add(e)}),n.canvas.on("mouse:move",function(o){void 0!==e&&(console.log("Moved"),t||(t=!0),e.set("x2",o.e.offsetX),e.set("y2",o.e.offsetY),n.canvas.renderAll(!1))}),n.canvas.on("mouse:up",function(){e.stroke="black",t?(n.canvas.renderAll(!1),console.log("line constructed")):(n.canvas.remove(e),n.chooseTool("select")),e=void 0,t=!1})},c.deactivate=function(){},this.tools={select:r,line:c},this.currentTool,this.chooseTool("select"),$(".btn").click(function(){var e=$(this).find("input").val();console.log("ui detected a click on "+e),n.chooseTool(e)}),$("#canvas-container").click(function(){n.chooseTool("select")}),console.log("drawing tool constructor finished")}n.prototype.chooseTool=function(e){var t=this.tools[e];if(void 0===t)return void console.warn('Warning! Could not find tool with selector "'+e+'"\nExiting tool chooser.');this.canvas.off("mouse:up"),this.canvas.off("mouse:down"),this.canvas.off("mouse:move");try{console.log("Choosing "+t.name+" over "+this.currentTool.name),this.currentTool.setActive(!1);var o=this.currentTool}catch(n){console.log("Choosing "+t.name)}return t.setActive(!0),this.currentTool=t,o},n.prototype.check=function(){for(var e=this.canvas.getObjects(),t=0;t<e.length;t++)console.log(e[t].selectable+" "+e[t])};var i=function(e,t){this.name=e||"Tool",this.selector=t||"",this.active=!1};i.prototype.setActive=function(e){return console.log(this.name+" active? "+this.active),this.active===e?e:(this.active=e,e===!0?(console.log("Activating "+this.name),this.activate(),console.log(this.name+" has been activated")):(console.log("Deactivating "+this.name),this.deactivate(),console.log(this.name+" is no longer active")),e)},i.prototype.isActive=function(){return this.active},i.prototype.activate=function(){console.warn("unimplemented activation method")},i.prototype.deactivate=function(){console.warn("unimplemented deactivation method")},o.exports=n}),window.DrawingTool=require("scripts/drawing-tool");